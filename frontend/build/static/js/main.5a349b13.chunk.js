(this.webpackJsonpmicroblog=this.webpackJsonpmicroblog||[]).push([[0],{46:function(e,t,n){e.exports=n(79)},51:function(e,t,n){},70:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),c=n.n(o),i=(n(51),n(1)),s=n.n(i),l=n(9),u=n(4),p=n(5),d=n(8),m=n(6),h=n(7),f=n(15),b=n.n(f),v=(n(70),n(19)),y=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Microblog"),r.a.createElement("h3",null,"Get in the rhythm of blogging!"),r.a.createElement("div",null,r.a.createElement(v.c,{className:"nav-item",style:{marginRight:"10px"},exact:!0,to:"/"},"Home"),r.a.createElement(v.c,{className:"nav-item",exact:!0,to:"/new"},"Add a New Post")))}}]),t}(r.a.Component),O=n(22),j=n(3),E=n(21),g=n(16),k=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state=n.props.isEditing?{title:n.props.currentPost.title,description:n.props.currentPost.description,body:n.props.currentPost.body,id:n.props.currentPost.id,votes:n.props.currentPost.votes}:{title:"",description:"",body:"",votes:0},n.handleChange=n.handleChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.handleEdit=n.handleEdit.bind(Object(j.a)(n)),n.handleCancel=n.handleCancel.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addPost(this.state)}},{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"handleCancel",value:function(){this.props.cancel()}},{key:"handleEdit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.updatePost(this.state.id,this.state);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return e=this.props.isEditing?this.handleEdit:this.handleSubmit,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-8",style:{margin:"0 auto"}},r.a.createElement("form",{onSubmit:e},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",placeholder:"",name:"title",value:this.state.title,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",placeholder:"",name:"description",value:this.state.description,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"body"},"Body"),r.a.createElement("textarea",{className:"form-control",id:"body",rows:"7",name:"body",value:this.state.body,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{marginRight:"10px"}},"Save"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.handleCancel},"Cancel"))))}}]),t}(r.a.Component),x="ADDPOST",w="EDITPOST",C="REMOVEPOST",P="LOADTITLES",N="ADDCOMMENT",A="REMOVECOMMENT",S="LOADPOST",T="VOTE",D=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BASE_URL||"http://localhost:5000";function V(e){return{type:"ERROR",error:e}}function F(e,t){return{type:x,post:e,id:t}}function R(e,t){return{type:w,payload:{id:e,post:t}}}function I(e){return{type:C,id:e}}function L(e,t){return{type:N,payload:{comment:e,postId:t}}}function M(e,t){return{type:A,payload:{commentId:e,postId:t}}}function B(e,t){return{type:T,payload:{postId:e,votes:t}}}function _(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.post("".concat(D,"/api/posts/").concat(e,"/vote/").concat(t));case 3:r=n.sent,a(B(e,r.data.votes)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a(V(n.t0)),console.log("in error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}var U=n(43),W=n.n(U),J=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).add=n.add.bind(Object(j.a)(n)),n.cancel=n.cancel.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"add",value:function(e){this.props.addPostToApi(e,W()()),this.props.history.push("/")}},{key:"cancel",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(k,{addPost:this.add,cancel:this.cancel})}}]),t}(r.a.Component),G=Object(E.b)(null,{addPost:F,addPostToApi:function(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.post("".concat(D,"/api/posts"),e);case 3:r=n.sent,a(F(r.data,t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(V(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})(J),H=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleRemove=n.handleRemove.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"handleRemove",value:function(e,t){this.props.deleteCommentFromApi(e,t)}},{key:"render",value:function(){var e=this;return r.a.createElement("li",null,r.a.createElement("i",{style:{color:"red",marginRight:"10px"},className:"fas fa-times",onClick:function(){return e.handleRemove(e.props.comment.id,e.props.postId)}}),this.props.comment.text)}}]),t}(r.a.Component),$=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.currentPost,t=[],n=!0,a=!1,o=void 0;try{for(var c,i=e.comments[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var s=c.value;t.push(r.a.createElement(H,{key:"".concat(e.id,"-").concat(s.id),postId:e.id,comment:s,deleteCommentFromApi:this.props.deleteCommentFromApi}))}}catch(l){a=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r.a.createElement("ul",{style:{listStyleType:"none"}},t)}}]),t}(r.a.Component),q=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={text:""},n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.handleChange=n.handleChange.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"handleSubmit",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.addComment(this.props.postId,this.state);case 3:this.setState({text:""});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"comment",placeholder:"",name:"text",value:this.state.text,onChange:this.handleChange})),r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{marginRight:"10px"},onClick:this.handleSubmit},"Save"))}}]),t}(r.a.Component),z=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={visibility:!0},n.toggleEditForm=n.toggleEditForm.bind(Object(j.a)(n)),n.handleEdit=n.handleEdit.bind(Object(j.a)(n)),n.handleCancelEdit=n.handleCancelEdit.bind(Object(j.a)(n)),n.handleRemove=n.handleRemove.bind(Object(j.a)(n)),n.handleVote=n.handleVote.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getPostFromApi(this.props.match.params.postid);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderLoading",value:function(){return r.a.createElement("p",null,"Loading...")}},{key:"toggleEditForm",value:function(){this.setState({visibility:!this.state.visibility})}},{key:"handleEdit",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.updatePostFromApi(t,n);case 2:this.props.history.push("/");case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleCancelEdit",value:function(){this.props.history.push("/")}},{key:"handleRemove",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.deletePostFromApi(t);case 2:this.props.history.push("/");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleVote",value:function(e,t){this.props.sendVoteToAPI(e,t)}},{key:"render",value:function(){var e=this,t=this.props.post.post;if(!t)return this.renderLoading();var n=this.state.visibility?"hidden":"visible";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-10",style:{margin:"0 auto"}},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("i",{style:{marginRight:"6px",color:"blue"},className:"flex-end fas fa-edit",onClick:this.toggleEditForm}),r.a.createElement("i",{style:{color:"red"},className:"fas fa-times",onClick:function(){return e.handleRemove(t.id)}})),r.a.createElement("div",{className:"d-flex justify-content-end",style:{marginTop:"10px"}},t.votes," votes:",r.a.createElement("i",{className:"fas fa-thumbs-up",style:{color:"green",marginLeft:"10px"},onClick:function(){return e.handleVote(t.id,"up")}}),r.a.createElement("i",{className:"fas fa-thumbs-down",style:{color:"red",marginLeft:"10px"},onClick:function(){return e.handleVote(t.id,"down")}})),r.a.createElement("h1",{className:"display-6"},t.title),r.a.createElement("p",{className:"lead"},t.description),r.a.createElement("p",null,t.body),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("h1",{className:"display-6"},"Comments"),r.a.createElement($,{currentPost:t,deleteCommentFromApi:this.props.deleteCommentFromApi}),r.a.createElement(q,{addComment:this.props.addCommentToApi,postId:t.id}))),r.a.createElement("div",{style:{visibility:n},className:"form-div"},r.a.createElement(k,{updatePost:this.handleEdit,isEditing:!0,currentPost:t,cancel:this.handleCancelEdit})))}}]),t}(r.a.Component);var K={getPostFromApi:function(e){return function(){var t=Object(l.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("".concat(D,"/api/posts/").concat(e));case 3:a=t.sent,n((r=a.data,{type:S,post:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(V(t.t0));case 10:case"end":return t.stop()}var r}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updatePostFromApi:function(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.put("".concat(D,"/api/posts/").concat(e),t);case 3:r=n.sent,a(R(e,r.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(V(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deletePostFromApi:function(e){return function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.delete("".concat(D,"/api/posts/").concat(e));case 3:t.sent,n(I(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(V(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},addCommentToApi:function(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.post("".concat(D,"/api/posts/").concat(e,"/comments"),t);case 3:r=n.sent,a(L(r.data,e)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(V(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteCommentFromApi:function(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.delete("".concat(D,"/api/posts/").concat(t,"/comments/").concat(e));case 3:a(M(e,t)),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),a(V(n.t0)),console.log("in error");case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},sendVoteToAPI:_},Q=Object(E.b)((function(e){return{post:e.posts}}),K)(z),X=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleVote=n.handleVote.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"handleVote",value:function(e,t){this.props.handleVote(e,t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card w-50 title-card",key:this.props.post.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},r.a.createElement(v.b,{to:"/".concat(this.props.post.id)},this.props.post.title)),r.a.createElement("p",{className:"card-text"},this.props.post.description)),r.a.createElement("div",{className:"card-footer"},this.props.post.votes," votes",r.a.createElement("i",{className:"fas fa-thumbs-up",style:{color:"green",marginLeft:"10px"},onClick:function(){return e.handleVote(e.props.post.id,"up")}}),r.a.createElement("i",{className:"fas fa-thumbs-down",style:{color:"red",marginLeft:"10px"},onClick:function(){return e.handleVote(e.props.post.id,"down")}})))}}]),t}(r.a.Component),Y=(n(78),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleVote=n.handleVote.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){0===this.props.titles.length&&this.props.getTitlesFromAPI()}},{key:"handleVote",value:function(e,t){this.props.sendVoteToAPI(e,t)}},{key:"render",value:function(){var e=this;return 0===this.props.titles.length?r.a.createElement("b",null,"Loading"):r.a.createElement("div",{className:"row"},this.props.titles.map((function(t){return r.a.createElement(X,{key:t.id,post:t,handleVote:e.handleVote})})))}}]),t}(r.a.Component));var Z={getTitlesFromAPI:function(){return function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(D,"/api/posts"));case 2:return n=e.sent,e.abrupt("return",t((a=n.data,{type:P,titles:a})));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},sendVoteToAPI:_},ee=Object(E.b)((function(e){return{titles:e.titles}}),Z)(Y),te=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/new",render:function(e){return r.a.createElement(G,e)}}),r.a.createElement(O.b,{exact:!0,path:"/:postid",render:function(e){return r.a.createElement(Q,e)}}),r.a.createElement(O.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(O.a,{to:"/"}))}}]),t}(r.a.Component),ne=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("https://microblogbackend.herokuapp.com","/ping"));case 2:t=e.sent,console.log(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(te,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(20),re=n(24);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){return{id:e.id,title:e.title,description:e.description,votes:e.votes}}function le(e){return e.sort((function(e,t){return t.votes-e.votes}))}var ue=Object(ae.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return ce({},e,{post:t.post});case x:return ce({},e,Object(g.a)({},t.id,ce({},t.post,{comments:[]})));case w:return ce({},e,Object(g.a)({},t.payload.id,t.payload.post));case N:var n=t.payload.postId;if(!e.post||+n!==e.post.id)return e;var a=ce({},e.post);return a.comments=[].concat(Object(re.a)(a.comments),[ce({},t.payload.comment)]),{post:a};case A:return{post:ce({},e.post,{comments:e.post.comments.filter((function(e){return e.id!==t.payload.commentId}))})};case T:return ce({},e,{post:ce({},e.post,{votes:t.payload.votes})});default:return e}},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return le(Object(re.a)(t.titles));case x:return le([].concat(Object(re.a)(e),[se(t.post)]));case w:return e.map((function(e){return e.id===t.payload.id?se(t.payload.post):e}));case C:return e.filter((function(e){return e.id!==t.id}));case T:return le(e.map((function(e){return e.id===t.payload.postId?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{votes:t.payload.votes}):e})));default:return e}}}),pe=n(44),de=n(45),me=Object(ae.createStore)(ue,Object(pe.composeWithDevTools)(Object(ae.applyMiddleware)(de.a)));c.a.render(r.a.createElement(E.a,{store:me},r.a.createElement(v.a,null,r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.5a349b13.chunk.js.map