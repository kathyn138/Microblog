{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kathynguyen/Documents/projects/microblog/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kathynguyen/Documents/projects/microblog/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{ADDPOST,EDITPOST,REMOVEPOST,LOADTITLES,ADDCOMMENT,REMOVECOMMENT,LOADPOST,VOTE}from\"./actionTypes\";var BASE_URL=process.env.REACT_APP_BASE_URL||\"http://localhost:5000\";function getTitles(titles){return{type:LOADTITLES,titles:titles};}export function getTitlesFromAPI(){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(BASE_URL,\"/api/posts\"));case 2:response=_context.sent;return _context.abrupt(\"return\",dispatch(getTitles(response.data)));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}function handleError(error){return{type:\"ERROR\",error:error};}export function addPost(post,id){return{type:ADDPOST,post:post,id:id};}export function addPostToApi(data,id){return(/*#__PURE__*/function(){var _thunk=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(BASE_URL,\"/api/posts\"),data);case 3:response=_context2.sent;dispatch(addPost(response.data,id));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch(handleError(_context2.t0));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));function thunk(_x2){return _thunk.apply(this,arguments);}return thunk;}());}function getPost(post){return{type:LOADPOST,post:post};}export function getPostFromApi(id){return(/*#__PURE__*/function(){var _thunk2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"\".concat(BASE_URL,\"/api/posts/\").concat(id));case 3:response=_context3.sent;dispatch(getPost(response.data));_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch(handleError(_context3.t0));case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));function thunk(_x3){return _thunk2.apply(this,arguments);}return thunk;}());}export function editPost(id,post){return{type:EDITPOST,payload:{id:id,post:post}};}export function updatePostFromApi(id,postData){return(/*#__PURE__*/function(){var _thunk3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put(\"\".concat(BASE_URL,\"/api/posts/\").concat(id),postData);case 3:response=_context4.sent;dispatch(editPost(id,response.data));_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch(handleError(_context4.t0));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));function thunk(_x4){return _thunk3.apply(this,arguments);}return thunk;}());}export function removePost(id){return{type:REMOVEPOST,id:id};}export function deletePostFromApi(id){return(/*#__PURE__*/function(){var _thunk4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.delete(\"\".concat(BASE_URL,\"/api/posts/\").concat(id));case 3:response=_context5.sent;dispatch(removePost(id));_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch(handleError(_context5.t0));case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));function thunk(_x5){return _thunk4.apply(this,arguments);}return thunk;}());}export function addComment(comment,postId){return{type:ADDCOMMENT,payload:{comment:comment,postId:postId}};}export function addCommentToApi(postId,comment){return(/*#__PURE__*/function(){var _thunk5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.post(\"\".concat(BASE_URL,\"/api/posts/\").concat(postId,\"/comments\"),comment);case 3:response=_context6.sent;dispatch(addComment(response.data,postId));_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);dispatch(handleError(_context6.t0));case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));function thunk(_x6){return _thunk5.apply(this,arguments);}return thunk;}());}export function removeComment(commentId,postId){return{type:REMOVECOMMENT,payload:{commentId:commentId,postId:postId}};}export function deleteCommentFromApi(commentId,postId){return(/*#__PURE__*/function(){var _thunk6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.delete(\"\".concat(BASE_URL,\"/api/posts/\").concat(postId,\"/comments/\").concat(commentId));case 3:dispatch(removeComment(commentId,postId));_context7.next=10;break;case 6:_context7.prev=6;_context7.t0=_context7[\"catch\"](0);dispatch(handleError(_context7.t0));console.log(\"in error\");case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[0,6]]);}));function thunk(_x7){return _thunk6.apply(this,arguments);}return thunk;}());}export function vote(postId,votes){return{type:VOTE,payload:{postId:postId,votes:votes}};}export function sendVoteToAPI(postId,direction){return(/*#__PURE__*/function(){var _thunk7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var response;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.post(\"\".concat(BASE_URL,\"/api/posts/\").concat(postId,\"/vote/\").concat(direction));case 3:response=_context8.sent;dispatch(vote(postId,response.data.votes));_context8.next=11;break;case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](0);dispatch(handleError(_context8.t0));console.log(\"in error\",_context8.t0);case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,7]]);}));function thunk(_x8){return _thunk7.apply(this,arguments);}return thunk;}());}","map":{"version":3,"sources":["/Users/kathynguyen/Documents/projects/microblog/frontend/src/actions.js"],"names":["axios","ADDPOST","EDITPOST","REMOVEPOST","LOADTITLES","ADDCOMMENT","REMOVECOMMENT","LOADPOST","VOTE","BASE_URL","process","env","REACT_APP_BASE_URL","getTitles","titles","type","getTitlesFromAPI","dispatch","get","response","data","handleError","error","addPost","post","id","addPostToApi","thunk","getPost","getPostFromApi","editPost","payload","updatePostFromApi","postData","put","removePost","deletePostFromApi","delete","addComment","comment","postId","addCommentToApi","removeComment","commentId","deleteCommentFromApi","console","log","vote","votes","sendVoteToAPI","direction"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n  ADDPOST,\n  EDITPOST,\n  REMOVEPOST,\n  LOADTITLES,\n  ADDCOMMENT,\n  REMOVECOMMENT,\n  LOADPOST,\n  VOTE\n} from \"./actionTypes\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:5000\";\n\nfunction getTitles(titles) {\n  return {\n    type: LOADTITLES,\n    titles,\n  };\n}\n\nexport function getTitlesFromAPI() {\n  return async function (dispatch) {\n    const response = await axios.get(`${BASE_URL}/api/posts`);\n    return dispatch(getTitles(response.data));\n  };\n}\n\nfunction handleError(error) {\n  return {\n    type: \"ERROR\",\n    error\n  };\n}\n\nexport function addPost(post, id) {\n  return {\n    type: ADDPOST,\n    post,\n    id\n  };\n}\n\nexport function addPostToApi(data, id) {\n  return async function thunk(dispatch) {\n    try {\n      let response = await axios.post(`${BASE_URL}/api/posts`, data);\n      dispatch(addPost(response.data, id));\n    } catch (error) {\n      dispatch(handleError(error));\n    }\n  };\n}\n\nfunction getPost(post) {\n  return { type: LOADPOST, post };\n}\n\nexport function getPostFromApi(id) {\n  return async function thunk(dispatch) {\n    try {\n      let response = await axios.get(`${BASE_URL}/api/posts/${id}`);\n      dispatch(getPost(response.data));\n    } catch (error) {\n      dispatch(handleError(error));\n    }\n  };\n}\n\nexport function editPost(id, post) {\n  return {\n    type: EDITPOST,\n    payload: {\n      id,\n      post\n    }\n  };\n}\n\nexport function updatePostFromApi(id, postData) {\n  return async function thunk(dispatch) {\n    try {\n      let response = await axios.put(`${BASE_URL}/api/posts/${id}`, postData);\n      dispatch(editPost(id, response.data))\n    } catch (error) {\n      dispatch(handleError(error));\n    }\n  }\n}\n\nexport function removePost(id) {\n  return {\n    type: REMOVEPOST,\n    id\n  };\n}\n\nexport function deletePostFromApi(id) {\n  return async function thunk(dispatch) {\n    try {\n      let response = await axios.delete(`${BASE_URL}/api/posts/${id}`);\n      dispatch(removePost(id));\n    } catch (error) {\n      dispatch(handleError(error));\n    }\n  }\n}\n\nexport function addComment(comment, postId) {\n  return {\n    type: ADDCOMMENT,\n    payload: {\n      comment,\n      postId\n    }\n  };\n}\n\nexport function addCommentToApi(postId, comment) {\n  return async function thunk(dispatch) {\n    try {\n      let response = await axios.post(`${BASE_URL}/api/posts/${postId}/comments`, comment);\n      dispatch(addComment(response.data, postId));\n  } catch (error) {\n      dispatch(handleError(error));\n    }\n  }\n}\n\nexport function removeComment(commentId, postId) {\n  return {\n    type: REMOVECOMMENT,\n    payload: {\n      commentId,\n      postId\n    }\n  };\n}\n\nexport function deleteCommentFromApi(commentId, postId) {\n  return async function thunk(dispatch) {\n    try {\n      await axios.delete(`${BASE_URL}/api/posts/${postId}/comments/${commentId}`);\n      dispatch(removeComment(commentId, postId));\n  } catch (error) {\n      dispatch(handleError(error));\n      console.log(\"in error\")\n    }\n  }\n}\n\nexport function vote(postId, votes) {\n  return {\n    type: VOTE,\n    payload: {\n      postId, \n      votes\n    }\n  };\n}\n\nexport function sendVoteToAPI(postId, direction) {\n  return async function thunk(dispatch) {\n    try {\n      const response = await axios.post(`${BASE_URL}/api/posts/${postId}/vote/${direction}`);\n      dispatch(vote(postId, response.data.votes));\n    } catch (error) {\n      dispatch(handleError(error));\n      console.log(\"in error\", error)\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}