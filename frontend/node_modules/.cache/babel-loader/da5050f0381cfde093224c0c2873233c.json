{"ast":null,"code":"import _defineProperty from \"/Users/kathynguyen/Documents/projects/microblog/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { ADDPOST, EDITPOST, ADDCOMMENT, REMOVECOMMENT, LOADPOST, VOTE } from \"../actionTypes\";\nexport default function rootReducer(state = {}, action) {\n  switch (action.type) {\n    case LOADPOST:\n      return _objectSpread({}, state, {\n        post: action.post\n      });\n\n    case ADDPOST:\n      return _objectSpread({}, state, {\n        [action.id]: _objectSpread({}, action.post, {\n          comments: []\n        })\n      });\n\n    case EDITPOST:\n      return _objectSpread({}, state, {\n        [action.payload.id]: action.payload.post\n      });\n    // don't need to ...state for comments and votes\n    // because state is just the singular post\n    // (below is pseudo code for state)\n    // {post: {id, title, comments, description, votes }}\n\n    case ADDCOMMENT:\n      const postId = action.payload.postId; // if post doesn't exist or payload postId doesn't match the id of the post, \n      // return state\n\n      if (!state.post || +postId !== state.post.id) return state;\n\n      let post = _objectSpread({}, state.post); // spread out post.comments to not overwrite old comments \n      // with new comment\n\n\n      post.comments = [...post.comments, _objectSpread({}, action.payload.comment)];\n      return {\n        post\n      };\n\n    case REMOVECOMMENT:\n      return {\n        post: _objectSpread({}, state.post, {\n          comments: state.post.comments.filter(comment => comment.id !== action.payload.commentId)\n        })\n      };\n\n    case VOTE:\n      return _objectSpread({}, state, {\n        post: _objectSpread({}, state.post, {\n          votes: action.payload.votes\n        })\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/kathynguyen/Documents/projects/microblog/frontend/src/Reducers/postReducer.js"],"names":["ADDPOST","EDITPOST","ADDCOMMENT","REMOVECOMMENT","LOADPOST","VOTE","rootReducer","state","action","type","post","id","comments","payload","postId","comment","filter","commentId","votes"],"mappings":";;;;;;AAAA,SACEA,OADF,EAEEC,QAFF,EAGEC,UAHF,EAIEC,aAJF,EAKEC,QALF,EAMEC,IANF,QAOO,gBAPP;AASA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAG,EAA7B,EAAiCC,MAAjC,EAAyC;AACtD,UAAQA,MAAM,CAACC,IAAf;AAEE,SAAKL,QAAL;AACE,+BAAYG,KAAZ;AAAmBG,QAAAA,IAAI,EAAEF,MAAM,CAACE;AAAhC;;AAEF,SAAKV,OAAL;AACE,+BAAYO,KAAZ;AAAmB,SAACC,MAAM,CAACG,EAAR,qBAAkBH,MAAM,CAACE,IAAzB;AAA+BE,UAAAA,QAAQ,EAAE;AAAzC;AAAnB;;AAEF,SAAKX,QAAL;AACE,+BAAYM,KAAZ;AAAmB,SAACC,MAAM,CAACK,OAAP,CAAeF,EAAhB,GAAqBH,MAAM,CAACK,OAAP,CAAeH;AAAvD;AAGF;AACA;AACA;AACA;;AAEA,SAAKR,UAAL;AAAA,YACUY,MADV,GACqBN,MAAM,CAACK,OAD5B,CACUC,MADV,EAGE;AACA;;AACA,UAAI,CAACP,KAAK,CAACG,IAAP,IAAe,CAACI,MAAD,KAAYP,KAAK,CAACG,IAAN,CAAWC,EAA1C,EAA8C,OAAOJ,KAAP;;AAE9C,UAAIG,IAAI,qBAAQH,KAAK,CAACG,IAAd,CAAR,CAPF,CASE;AACA;;;AACAA,MAAAA,IAAI,CAACE,QAAL,GAAgB,CACd,GAAGF,IAAI,CAACE,QADM,oBAETJ,MAAM,CAACK,OAAP,CAAeE,OAFN,EAAhB;AAKA,aAAO;AACLL,QAAAA;AADK,OAAP;;AAIF,SAAKP,aAAL;AACE,aAAO;AACLO,QAAAA,IAAI,oBACCH,KAAK,CAACG,IADP;AACaE,UAAAA,QAAQ,EAAEL,KAAK,CAACG,IAAN,CAAWE,QAAX,CAAoBI,MAApB,CACvBD,OAAO,IAAIA,OAAO,CAACJ,EAAR,KAAeH,MAAM,CAACK,OAAP,CAAeI,SADlB;AADvB;AADC,OAAP;;AAQF,SAAKZ,IAAL;AACE,+BACKE,KADL;AAEEG,QAAAA,IAAI,oBACCH,KAAK,CAACG,IADP;AACaQ,UAAAA,KAAK,EAAEV,MAAM,CAACK,OAAP,CAAeK;AADnC;AAFN;;AAOF;AACE,aAAOX,KAAP;AAvDJ;AAyDD","sourcesContent":["import {\n  ADDPOST,\n  EDITPOST,\n  ADDCOMMENT,\n  REMOVECOMMENT,\n  LOADPOST,\n  VOTE\n} from \"../actionTypes\";\n\nexport default function rootReducer(state = {}, action) {\n  switch (action.type) {\n\n    case LOADPOST:\n      return { ...state, post: action.post };\n\n    case ADDPOST:\n      return { ...state, [action.id]: { ...action.post, comments: [] } };\n\n    case EDITPOST:\n      return { ...state, [action.payload.id]: action.payload.post };\n\n\n    // don't need to ...state for comments and votes\n    // because state is just the singular post\n    // (below is pseudo code for state)\n    // {post: {id, title, comments, description, votes }}\n\n    case ADDCOMMENT:\n      const { postId } = action.payload;\n\n      // if post doesn't exist or payload postId doesn't match the id of the post, \n      // return state\n      if (!state.post || +postId !== state.post.id) return state;\n\n      let post = { ...state.post };\n\n      // spread out post.comments to not overwrite old comments \n      // with new comment\n      post.comments = [\n        ...post.comments,\n        { ...action.payload.comment }\n      ];\n\n      return {\n        post\n      };\n\n    case REMOVECOMMENT:\n      return {\n        post: {\n          ...state.post, comments: state.post.comments.filter(\n            comment => comment.id !== action.payload.commentId\n          )\n        }\n      }\n\n    case VOTE:\n      return {\n        ...state,\n        post: {\n          ...state.post, votes: action.payload.votes\n        }\n      }\n\n    default:\n      return state;\n  }\n}"]},"metadata":{},"sourceType":"module"}